gyp info it worked if it ends with ok
gyp info using node-gyp@7.1.2
gyp info using node@16.10.0 | darwin | x64
gyp info find Python using Python version 3.9.7 found at "/usr/local/opt/python@3.9/bin/python3.9"
(node:16220) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.
(Use `node --trace-deprecation ...` to show where the warning was created)
gyp info spawn /usr/local/opt/python@3.9/bin/python3.9
gyp info spawn args [
gyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',
gyp info spawn args   'binding.gyp',
gyp info spawn args   '-f',
gyp info spawn args   'make',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/bhenao/workspace/cloudfoundry/nodejs-buildpack/fixtures/airgapped_no_npm_version/node_modules/bson-ext/build/config.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/common.gypi',
gyp info spawn args   '-Dlibrary=shared_library',
gyp info spawn args   '-Dvisibility=default',
gyp info spawn args   '-Dnode_root_dir=/Users/bhenao/Library/Caches/node-gyp/16.10.0',
gyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp',
gyp info spawn args   '-Dnode_lib_file=/Users/bhenao/Library/Caches/node-gyp/16.10.0/<(target_arch)/node.lib',
gyp info spawn args   '-Dmodule_root_dir=/Users/bhenao/workspace/cloudfoundry/nodejs-buildpack/fixtures/airgapped_no_npm_version/node_modules/bson-ext',
gyp info spawn args   '-Dnode_engine=v8',
gyp info spawn args   '--depth=.',
gyp info spawn args   '--no-parallel',
gyp info spawn args   '--generator-output',
gyp info spawn args   'build',
gyp info spawn args   '-Goutput_dir=.'
gyp info spawn args ]
No receipt for 'com.apple.pkg.CLTools_Executables' found at '/'.

No receipt for 'com.apple.pkg.DeveloperToolsCLILeo' found at '/'.

No receipt for 'com.apple.pkg.DeveloperToolsCLI' found at '/'.

gyp info spawn make
gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:182:
../../nan/nan_maybe_43_inl.h:89:15: error: no member named 'ForceSet' in 'v8::Object'
  return obj->ForceSet(GetCurrentContext(), key, value, attribs);
         ~~~~~^
../../nan/nan_maybe_43_inl.h:221:17: error: no member named 'CloneElementAt' in 'v8::Array'
  return array->CloneElementAt(GetCurrentContext(), index);
         ~~~~~~~^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:187:
In file included from ../../nan/nan_converters.h:59:
../../nan/nan_converters_43_inl.h:18:1: error: no viable conversion from 'v8::Local<v8::Context>' to 'v8::Isolate *'
X(Boolean)
^~~~~~~~~~
../../nan/nan_converters_43_inl.h:15:26: note: expanded from macro 'X'
  return val->To ## TYPE(GetCurrentContext());                                 \
                         ^~~~~~~~~~~~~~~~~~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:3086:37: note: passing argument to parameter 'isolate' here
  Local<Boolean> ToBoolean(Isolate* isolate) const;
                                    ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:187:
In file included from ../../nan/nan_converters.h:59:
../../nan/nan_converters_43_inl.h:34:1: error: no viable conversion from 'v8::Local<v8::Context>' to 'v8::Isolate *'
X(bool, Boolean)
^~~~~~~~~~~~~~~~
../../nan/nan_converters_43_inl.h:31:29: note: expanded from macro 'X'
  return val->NAME ## Value(GetCurrentContext());                              \
                            ^~~~~~~~~~~~~~~~~~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:3096:30: note: passing argument to parameter 'isolate' here
  bool BooleanValue(Isolate* isolate) const;
                             ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:188:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:40:38: error: too few arguments to function call, expected 2, have 1
  return v8::BooleanObject::New(value).As<v8::BooleanObject>();
         ~~~~~~~~~~~~~~~~~~~~~~      ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:6178:23: note: 'New' declared here
  static Local<Value> New(Isolate* isolate, bool value);
                      ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:188:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:102:42: error: no viable conversion from 'v8::Isolate *' to 'Local<v8::Context>'
  return scope.Escape(v8::Function::New( isolate
                                         ^~~~~~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:200:7: note: candidate constructor (the implicit copy constructor) not viable: no known conversion from 'v8::Isolate *' to 'const v8::Local<v8::Context> &' for 1st argument
class Local {
      ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:200:7: note: candidate constructor (the implicit move constructor) not viable: no known conversion from 'v8::Isolate *' to 'v8::Local<v8::Context> &&' for 1st argument
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:204:13: note: candidate template ignored: could not match 'Local<type-parameter-0-0>' against 'v8::Isolate *'
  V8_INLINE Local(Local<S> that)
            ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:348:22: note: explicit constructor is not a candidate
  explicit V8_INLINE Local(T* that) : val_(that) {}
                     ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4752:22: note: passing argument to parameter 'context' here
      Local<Context> context, FunctionCallback callback,
                     ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:188:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:340:37: error: too few arguments to function call, expected 2, have 1
  return v8::StringObject::New(value).As<v8::StringObject>();
         ~~~~~~~~~~~~~~~~~~~~~      ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:6194:23: note: 'New' declared here
  static Local<Value> New(Isolate* isolate, Local<String> value);
                      ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:590:20: error: no type named 'GCEpilogueCallback' in 'v8::Isolate'
      v8::Isolate::GCEpilogueCallback callback
      ~~~~~~~~~~~~~^
../../nan/nan.h:596:20: error: no type named 'GCEpilogueCallback' in 'v8::Isolate'
      v8::Isolate::GCEpilogueCallback callback) {
      ~~~~~~~~~~~~~^
../../nan/nan.h:601:20: error: no type named 'GCPrologueCallback' in 'v8::Isolate'
      v8::Isolate::GCPrologueCallback callback
      ~~~~~~~~~~~~~^
../../nan/nan.h:607:20: error: no type named 'GCPrologueCallback' in 'v8::Isolate'
      v8::Isolate::GCPrologueCallback callback) {
      ~~~~~~~~~~~~~^
../../nan/nan.h:800:18: warning: 'MakeCallback' is deprecated: Use MakeCallback(..., async_context) [-Wdeprecated-declarations]
    return node::MakeCallback(
                 ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:183:1: note: 'MakeCallback' has been explicitly marked deprecated here
NODE_DEPRECATED("Use MakeCallback(..., async_context)",
^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:101:20: note: expanded from macro 'NODE_DEPRECATED'
    __attribute__((deprecated(message))) declarator
                   ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:814:18: warning: 'MakeCallback' is deprecated: Use MakeCallback(..., async_context) [-Wdeprecated-declarations]
    return node::MakeCallback(
                 ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:176:1: note: 'MakeCallback' has been explicitly marked deprecated here
NODE_DEPRECATED("Use MakeCallback(..., async_context)",
^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:101:20: note: expanded from macro 'NODE_DEPRECATED'
    __attribute__((deprecated(message))) declarator
                   ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:828:18: warning: 'MakeCallback' is deprecated: Use MakeCallback(..., async_context) [-Wdeprecated-declarations]
    return node::MakeCallback(
                 ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:169:1: note: 'MakeCallback' has been explicitly marked deprecated here
NODE_DEPRECATED("Use MakeCallback(..., async_context)",
^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:101:20: note: expanded from macro 'NODE_DEPRECATED'
    __attribute__((deprecated(message))) declarator
                   ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:866:53: error: too few arguments to function call, single argument 'context' was not specified
      v8::Local<v8::String> string = from->ToString();
                                     ~~~~~~~~~~~~~~ ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:3048:44: note: 'ToString' declared here
  V8_WARN_UNUSED_RESULT MaybeLocal<String> ToString(
                                           ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:876:37: error: cannot initialize a parameter of type 'v8::Isolate *' with an lvalue of type 'char *'
        length_ = string->WriteUtf8(str_, static_cast<int>(len), 0, flags);
                                    ^~~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:3277:26: note: passing argument to parameter 'isolate' here
  int WriteUtf8(Isolate* isolate, char* buffer, int length = -1,
                         ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1339:43: error: no matching member function for call to 'Get'
    v8::Local<v8::Value> a = New(handle)->Get(kCallbackIndex);
                             ~~~~~~~~~~~~~^~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4007:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4010:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1340:49: error: no matching member function for call to 'Get'
    v8::Local<v8::Value> b = New(other.handle)->Get(kCallbackIndex);
                             ~~~~~~~~~~~~~~~~~~~^~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4007:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4010:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1371:38: error: no matching member function for call to 'Get'
    return scope.Escape(New(handle)->Get(kCallbackIndex)
                        ~~~~~~~~~~~~~^~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4007:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4010:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1377:25: error: no matching member function for call to 'Get'
    return New(handle)->Get(kCallbackIndex)->IsUndefined();
           ~~~~~~~~~~~~~^~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4007:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4010:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1415:9: error: no matching member function for call to 'Get'
        Get(kCallbackIndex).As<v8::Function>();
        ^~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4007:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:4010:43: note: candidate function not viable: requires 2 arguments, but 1 was provided
  V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                          ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1425:31: warning: 'MakeCallback' is deprecated: Use MakeCallback(..., async_context) [-Wdeprecated-declarations]
    return scope.Escape(node::MakeCallback(
                              ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:183:1: note: 'MakeCallback' has been explicitly marked deprecated here
NODE_DEPRECATED("Use MakeCallback(..., async_context)",
^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/node.h:101:20: note: expanded from macro 'NODE_DEPRECATED'
    __attribute__((deprecated(message))) declarator
                   ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:1488:28: error: no matching member function for call to 'Set'
    New(persistentHandle)->Set(New(key).ToLocalChecked(), value);
    ~~~~~~~~~~~~~~~~~~~~~~~^~~
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:3961:37: note: candidate function not viable: requires 3 arguments, but 2 were provided
  V8_WARN_UNUSED_RESULT Maybe<bool> Set(Local<Context> context,
                                    ^
/Users/bhenao/Library/Caches/node-gyp/16.10.0/include/node/v8.h:3964:37: note: candidate function not viable: requires 3 arguments, but 2 were provided
  V8_WARN_UNUSED_RESULT Maybe<bool> Set(Local<Context> context, uint32_t index,
                                    ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
4 warnings and 20 errors generated.
make: *** [Release/obj.target/bson/ext/bson.o] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:194:23)
gyp ERR! stack     at ChildProcess.emit (node:events:390:28)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (node:internal/child_process:290:12)
gyp ERR! System Darwin 20.6.0
gyp ERR! command "/usr/local/Cellar/node/16.10.0/bin/node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /Users/bhenao/workspace/cloudfoundry/nodejs-buildpack/fixtures/airgapped_no_npm_version/node_modules/bson-ext
gyp ERR! node -v v16.10.0
gyp ERR! node-gyp -v v7.1.2
gyp ERR! not ok 
